<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Java中各种日志层出不穷，都曾想一统天下，最落得个鱼龙混杂，受苦的还是我们这些程序员。这篇文章不讲日志的设计与实现，只说说日常开发中如何使用，如何统一，排除日志冲突，统一日志配置。PS：本文只讨论常规的Java开发场景，不深入讨论J2ME、Android等开发框架。附阿里巴巴Java代码规范手册。"><meta name="keywords" content="Java, 日志, Jack Charles"><meta name="baidu-site-verification" content="OX529Jt4QY"><meta name="google-site-verification" content="1aTsp2fFHo02HArMMwntgihTzI3p1masFpGMtv_Du1o"><link rel="alternate" href="/atom.xml" title="Jack Charles"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="https://blog.zjee.me/2020/01/05/java-log-system/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css"><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
		if(location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
			console.log("local visit, not report baidu analytics");
			return;
		}
		var hm = document.createElement("script");
		hm.src = "https://hm.baidu.com/hm.js?3f20839b943a104368c94974ce5350fa";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-18T0HPMMWC"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	(function googleAna() {
		if(location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
			console.log("local visit, not report google analytics");
			return;
		}
		gtag('js', new Date());
		gtag('config', 'G-18T0HPMMWC');
	})();
</script><script id="baidu_push">
	(function(){
		if(location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
			console.log("local visit, not report baidu push");
			return;
		}
		
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https'){
	   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
	  }
	  else{
	  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	  }
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
</script>
<script>
  window.config = {"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

    <title>Java日志体系 - Jack Charles</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Jack Charles</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Jack Charles</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            Categories
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Java日志体系
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-01-05
        </span><span class="post-category">
            <a href="/categories/Java/">Java</a>
            </span>
        
			<span id="/2020/01/05/java-log-system/" class="leancloud_visitors" data-flag-title="Java日志体系">
				<span class="post-meta-item-text"> Visits </span>
				<span class="leancloud-visitors-count">0</span>
			</span>
		</div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、相关概念"><span class="toc-text">一、相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1、-日志门面"><span class="toc-text">1.1、 日志门面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2、桥接器"><span class="toc-text">1.2、桥接器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3、日志实现"><span class="toc-text">1.3、日志实现</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#二、各种Jar包及功能一览"><span class="toc-text">二、各种Jar包及功能一览</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、常见使用搭配"><span class="toc-text">三、常见使用搭配</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、常见问题"><span class="toc-text">四、常见问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五、常见日志配置"><span class="toc-text">五、常见日志配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-log4j配置"><span class="toc-text">5.1 log4j配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-log4j2配置"><span class="toc-text">5.2 log4j2配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-logback配置"><span class="toc-text">5.3 logback配置</span></a></li></ol></li>
    </div>
  </div><div class="post-content"><h1 id="一、相关概念"><a href="#一、相关概念" class="headerlink" title="一、相关概念"></a>一、相关概念</h1><h3 id="1-1、-日志门面"><a href="#1-1、-日志门面" class="headerlink" title="1.1、 日志门面"></a>1.1、 日志门面</h3><p><strong>日志门面</strong>是一个对外的、统一的日志”接口“，它不是具体的日志实现，它需要和log4j、logback这样的实现框架配合使用。现在最流行的日志门面是slf4j，按照官方的说法，slf4j是一个用于日志系统的简单Facade，允许最终用户在部署其应用时使用其所希望的日志系统。</p>
<p><strong>问：</strong>为什么要使用日志门面？直接调用log4j等实现框架的API不行吗？</p>
<p><strong>答：</strong>直接调用实现框架的API当然可以，但如果未来某一天有比log4j性能更好的实现框架，那升级替换可就是个大工程了。另外，如果现有工程依赖了两个模块，两个模块分别用不同的日志实现方案，那现有工程就需要维护两套日志配置。但有了<strong>日志门面</strong>后一切都变了，我们仅需要引入一种实现，也只需要维护这一种实现的配置文件，其他的实现全部<strong>桥接</strong>到门面即可，往后如果需要升级日志实现，也只需要升级一个jar包、一个配置文件即可。</p>
<h3 id="1-2、桥接器"><a href="#1-2、桥接器" class="headerlink" title="1.2、桥接器"></a>1.2、桥接器</h3><p>我们在开发中当然可以只使用一种日志实现方案，但引用的第三方依赖可就不一定了，为了统一日志配置，我们需要将第三方依赖的日志实现”引流”到我们自己的日志框架上，这个”引流“的功能就叫做桥接器。</p>
<h3 id="1-3、日志实现"><a href="#1-3、日志实现" class="headerlink" title="1.3、日志实现"></a>1.3、日志实现</h3><p>日志实现就是真正打日志干活的部分，Java中日志实现太多了，常见的有log4j、log4j2、jcl、logback等。</p>
<h1 id="二、各种Jar包及功能一览"><a href="#二、各种Jar包及功能一览" class="headerlink" title="二、各种Jar包及功能一览"></a>二、各种Jar包及功能一览</h1><table>
<thead>
<tr>
<th align="left"><strong>jar包</strong></th>
<th align="center"><strong>类型</strong></th>
<th align="center"><strong>转换方向</strong></th>
<th align="left"><strong>描述</strong></th>
<th><strong>注意事项</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">jcl-over-slf4j</td>
<td align="center">桥接包</td>
<td align="center">jcl -&gt; slf4j</td>
<td align="left">将Jakarta Commons Logging日志框架桥接到slf4j</td>
<td></td>
</tr>
<tr>
<td align="left">jul-to-slf4j</td>
<td align="center">桥接包</td>
<td align="center">juc -&gt; slf4j</td>
<td align="left">将java.util.logging的日志桥接到slf4j</td>
<td></td>
</tr>
<tr>
<td align="left">osgi-over-slf4j</td>
<td align="center">桥接包</td>
<td align="center">osgi -&gt; slf4j</td>
<td align="left">将osgi环境下的日志桥接到slf4j</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-android</td>
<td align="center">桥接包</td>
<td align="center">android -&gt; slf4j</td>
<td align="left">将android环境下的日志桥接到slf4j</td>
<td></td>
</tr>
<tr>
<td align="left">log4j-over-slf4j</td>
<td align="center">桥接包</td>
<td align="center">log4j -&gt; slf4j</td>
<td align="left">将log4j的日志桥接到slf4j</td>
<td>不能和slf4j-log4j12同时用</td>
</tr>
<tr>
<td align="left">log4j-to-slf4j</td>
<td align="center">桥接包</td>
<td align="center">log4j2 -&gt; slf4j</td>
<td align="left">将log4j2的日志桥接到slf4j</td>
<td>不能和log4j-slf4j-impl同时用</td>
</tr>
<tr>
<td align="left">slf4j-api</td>
<td align="center">slf4j门面</td>
<td align="center"></td>
<td align="left">slf4j的api接口jar包</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-ext</td>
<td align="center">slf4j门面</td>
<td align="center"></td>
<td align="left">slf4j扩展功能jar包</td>
<td></td>
</tr>
<tr>
<td align="left">log4j-api</td>
<td align="center">实现包</td>
<td align="center"></td>
<td align="left">log4j2的api接口jar包</td>
<td></td>
</tr>
<tr>
<td align="left">log4j-core</td>
<td align="center">实现包</td>
<td align="center"></td>
<td align="left">log4j2的日志输出核心jar包</td>
<td></td>
</tr>
<tr>
<td align="left">log4j</td>
<td align="center">实现包</td>
<td align="center"></td>
<td align="left">log4j实现包（1.2）</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-migrator</td>
<td align="center">实现包</td>
<td align="center"></td>
<td align="left">一个GUI工具，支持将代码中其他日志API转换为slf4j的写法</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-jcl</td>
<td align="center">slf4j+jcl打包</td>
<td align="center">slf4j -&gt; jcl</td>
<td align="left">slf4j采用Jakarta Commons Logging日志框架实现</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-jdk14</td>
<td align="center">slf4j+jul打包</td>
<td align="center">slf4j -&gt; jul</td>
<td align="left">slf4j采用java.util.logging实现</td>
<td>不能和jul-to-slf4j同时用</td>
</tr>
<tr>
<td align="left">slf4j-log4j12</td>
<td align="center">slf4j+log4j12打包</td>
<td align="center">slf4j -&gt; log4j</td>
<td align="left">slf4j采用log4j实现（12表示1.2版本）</td>
<td>不能和log4j-over-slf4j同时用</td>
</tr>
<tr>
<td align="left">log4j-slf4j-impl</td>
<td align="center">slf4j+log4j2打包</td>
<td align="center">slf4j -&gt; log4j2</td>
<td align="left">slf4j采用log4j2实现</td>
<td>不能和log4j-to-slf4j同时用</td>
</tr>
<tr>
<td align="left">slf4j-nop</td>
<td align="center">slf4j+无输出打包</td>
<td align="center">slf4j -&gt; null</td>
<td align="left">slf4j的空接口输出绑定，丢弃所有日志输出</td>
<td></td>
</tr>
<tr>
<td align="left">slf4j-simple</td>
<td align="center">sl4j+简单实现打包</td>
<td align="center">slf4j -&gt; slf4j-simple</td>
<td align="left">slf4j的自带的简单日志输出实现</td>
<td></td>
</tr>
<tr>
<td align="left">logback-classic</td>
<td align="center">slf4j+logback打包</td>
<td align="center">slf4j -&gt; logback</td>
<td align="left">slf4j采用logback实现</td>
<td></td>
</tr>
<tr>
<td align="left">logback-core</td>
<td align="center"></td>
<td align="center"></td>
<td align="left">logback核心依赖</td>
<td></td>
</tr>
<tr>
<td align="left">logback-access</td>
<td align="center"></td>
<td align="center"></td>
<td align="left">与servlet容器集成，提供通过http访问日志功能</td>
<td></td>
</tr>
<tr>
<td align="left">log4j-1.2-api</td>
<td align="center">log4j桥接到log4j2</td>
<td align="center">log4j -&gt; log4j2</td>
<td align="left">将log4j的日志转接到log4j2日志框架</td>
<td></td>
</tr>
</tbody></table>
<h1 id="三、常见使用搭配"><a href="#三、常见使用搭配" class="headerlink" title="三、常见使用搭配"></a>三、常见使用搭配</h1><ol>
<li><strong>slf4j + log4j（已过时）</strong>：引入<code>slf4j-log4j12</code>即可，另外可根据需求加入桥接包，不可与<code>log4j-over-slf4j</code>同时使用，会引发<code>StackOverflowError</code>异常。</li>
<li><strong>slf4j + log4j2（流行）</strong>：引入<code>log4j-slf4j-impl</code>即可，另外可根据需求加入桥接包，不可与<code>log4j-to-slf4j</code>同时使用，会引发<code>StackOverflowError</code>异常。</li>
<li><strong>slf4j + logback（最优）</strong>：引入 <code>logback-classic</code>即可，另外可根据需求加入桥接包。logback与slf4j是同一人开发，兼容性很好，springboot默认就采用logback方案。</li>
</ol>
<p>其他的使用方式有log4j、log4j2、jul等单独使用的，这里强烈不推荐，请按<a href="https://yq.aliyun.com/articles/69327?utm_content=m_10088" target="_blank" rel="noopener">阿里巴巴Java代码规范</a>中【日志规约】编码。</p>
<h1 id="四、常见问题"><a href="#四、常见问题" class="headerlink" title="四、常见问题"></a>四、常见问题</h1><ol>
<li><p><strong>找到多个slf4j实现(Class path contains multiple SLF4J bindings.)</strong></p>
<img src="/2020/01/05/java-log-system/mult-bindings.png" title="mult-bindings">

<p>这种情况是上面的<code>slf4j+xxx打包</code>这样的jar包引入了两类导致的，我们根据需要保留一类，排除其他的就可以了。</p>
</li>
<li><p><strong>jar包不能共存，或者直接报<code>StackOverflowError</code>异常</strong></p>
<img src="/2020/01/05/java-log-system/stackOverflow.png" title="stackOverflowError">

<p>这种情况大多数原因是实现包与实现包对应的桥接包同时引入了，打印日志的时候就会发生死循环方法调用，一直到栈溢出，实现比较好的包如<code>log4j-slf4j-impl</code>，会在启动时告诉你两者不能共存。总的来说，<strong>实现和桥接只能选一个</strong>。</p>
</li>
<li><p><strong>其他异常情况大多数是由版本不兼容导致的，请参考<a href="http://www.slf4j.org/codes.html" target="_blank" rel="noopener">slf4j错误含义及解决方法</a>。</strong></p>
</li>
<li><p><strong>log4j(也称log4j12)与log4j2的区别：<a href="https://www.cnblogs.com/WangBoBlog/p/7841217.html" target="_blank" rel="noopener">Log4j与Log4j2的区别</a>。</strong></p>
</li>
</ol>
<h1 id="五、常见日志配置"><a href="#五、常见日志配置" class="headerlink" title="五、常见日志配置"></a>五、常见日志配置</h1><h3 id="5-1-log4j配置"><a href="#5-1-log4j配置" class="headerlink" title="5.1 log4j配置"></a>5.1 log4j配置</h3><ol>
<li><p>基于XML的配置</p>
<details><summary style="color:blue">点击展开代码</summary>
    <a href="https://blog.csdn.net/manmanxiaohui/article/details/79922546" target="_blank">参考文档</a>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span>  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span>  <span class="attr">debug</span>=<span class="string">"true"</span> <span class="attr">xmlns:log4j</span>=<span class="string">'http://jakarta.apache.org/log4j/'</span> &gt;</span>  </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ========================== 自定义输出格式说明======================== --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %r 输出自应用启动到输出该log信息耗费的毫秒数  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %c 输出所属的类目，通常就是所在类的全名 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %t 输出产生该日志事件的线程名 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %n 输出一个回车换行符，Windows平台为“/r/n”，Unix平台为“/n” --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d&#123;yyy MMM dd HH:mm:ss,SSS&#125;，输出类似：2002年10月18日 22：10：28，921  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- %l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlo4.main(TestLog4.java:10)  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- ============================================================== --&gt;</span></span><br><span class="line">     </span><br><span class="line">      <span class="comment">&lt;!-- ========================== 输出方式说明========================= --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- Log4j提供的appender有以下几种:  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- org.apache.log4j.ConsoleAppender(控制台),  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- org.apache.log4j.FileAppender(文件),  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- org.apache.log4j.DailyRollingFileAppender(每天产生一个日志文件), --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- org.apache.log4j.RollingFileAppender(文件大小到达指定尺寸的时候产生一个新的文件),  --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- org.apache.log4j.WriterAppender(将日志信息以流格式发送到任意指定的地方)   --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"CONSOLE"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.ConsoleAppender"</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- &lt;param name="Target" value="System.out"/&gt; --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c  Method: %l ]%n%p:%m%n"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  &lt;filter class="org.apache.log4j.varia.LevelRangeFilter"&gt;</span></span><br><span class="line"><span class="comment">            &lt;param name="LevelMin" value="DEBUG"/&gt;</span></span><br><span class="line"><span class="comment">            &lt;param name="LevelMax" value="DEBUG"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;/filter&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- output the debug   --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--  &lt;appender name="log4jDebug" class="org.apache.log4j.DailyRollingFileAppender"&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="File" value="log_"/&gt;    </span></span><br><span class="line"><span class="comment">        &lt;param name="MaxFileSize" value="KB"/&gt; </span></span><br><span class="line"><span class="comment">        &lt;param name="MaxBackupIndex" value="2"/&gt; --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"log4jDebug"</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.RollingFileAppender"</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.TimeBasedRollingPolicy"</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"FileNamePattern"</span> <span class="attr">value</span>=<span class="string">"./log/log_%d&#123;yyyy-MM-dd&#125;.log"</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c Method: %l ]%n%p:%m%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.varia.LevelRangeFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMin"</span> <span class="attr">value</span>=<span class="string">"DEBUG"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMax"</span> <span class="attr">value</span>=<span class="string">"DEBUG"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--  &lt;appender name="log4jInfo" class="org.apache.log4j.DailyRollingFileAppender"&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="File" value="log_"/&gt;       </span></span><br><span class="line"><span class="comment">        &lt;param name="DatePattern" value="'.log'yyyy-MM-dd"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="Append" value="true"/&gt;</span></span><br><span class="line"><span class="comment">       &lt;param name="MaxFileSize" value="5KB"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="MaxBackupIndex" value="2"/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"log4jInfo"</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.RollingFileAppender"</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.TimeBasedRollingPolicy"</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"FileNamePattern"</span> <span class="attr">value</span>=<span class="string">"./log/log_%d&#123;yyyy-MM-dd&#125;.log"</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c  Method: %l ]%n%p:%m%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.varia.LevelRangeFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMin"</span> <span class="attr">value</span>=<span class="string">"INFO"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMax"</span> <span class="attr">value</span>=<span class="string">"INFO"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--  &lt;appender name="log4jWarn" class="org.apache.log4j.DailyRollingFileAppender"&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="File" value="/log_"/&gt;      </span></span><br><span class="line"><span class="comment">        &lt;param name="DatePattern" value="'.log'yyyy-MM-dd"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="Append" value="true"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="MaxFileSize" value="5KB"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;param name="MaxBackupIndex" value="2"/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"log4jWarn"</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.RollingFileAppender"</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.TimeBasedRollingPolicy"</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"FileNamePattern"</span> <span class="attr">value</span>=<span class="string">"./log/log_%d&#123;yyyy-MM-dd&#125;.log"</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c Method: %l ]%n%p:%m%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.varia.LevelRangeFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMin"</span> <span class="attr">value</span>=<span class="string">"WARN"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMax"</span> <span class="attr">value</span>=<span class="string">"WARN"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  &lt;appender name="log4jError" class="org.apache.log4j.DailyRollingFileAppender"&gt; --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"log4jError"</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.RollingFileAppender"</span>&gt;</span>  </span><br><span class="line">       <span class="comment">&lt;!--  &lt;param name="File" value="/error_"/&gt;    </span></span><br><span class="line"><span class="comment">        &lt;param name="DatePattern" value="'.log'yyyy-MM-dd"/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Append"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span>  <span class="attr">class</span>=<span class="string">"org.apache.log4j.rolling.TimeBasedRollingPolicy"</span>&gt;</span>  </span><br><span class="line">               <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"FileNamePattern"</span> <span class="attr">value</span>=<span class="string">"./log/error_%d&#123;yyyy-MM-dd&#125;.log"</span> /&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span> </span><br><span class="line">        </span><br><span class="line">      <span class="comment">&lt;!--   &lt;param name="MaxFileSize" value="5KB"/&gt; --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--   &lt;param name="MaxBackupIndex" value="2"/&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span> <span class="attr">value</span>=<span class="string">"%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c Method: %l ]%n%p:%m%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.varia.LevelRangeFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMin"</span> <span class="attr">value</span>=<span class="string">"ERROR"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"LevelMax"</span> <span class="attr">value</span>=<span class="string">"ERROR"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--通过&lt;category&gt;&lt;/category&gt;的定义可以将各个包中的类日志输出到不同的日志文件中--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--     &lt;category name="com.gzy"&gt;</span></span><br><span class="line"><span class="comment">            &lt;priority value="debug" /&gt;</span></span><br><span class="line"><span class="comment">            &lt;appender-ref ref="log4jTestLogInfo" /&gt;</span></span><br><span class="line"><span class="comment">            &lt;appender-ref ref="log4jTestDebug" /&gt;</span></span><br><span class="line"><span class="comment">        &lt;/category&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"MAIL"</span>     </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"org.apache.log4j.net.SMTPAppender"</span>&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"threshold"</span> <span class="attr">value</span>=<span class="string">"debug"</span> /&gt;</span>     </span><br><span class="line">      <span class="comment">&lt;!-- 日志的错误级别     </span></span><br><span class="line"><span class="comment">       &lt;param name="threshold" value="error"/&gt;     </span></span><br><span class="line"><span class="comment">      --&gt;</span>     </span><br><span class="line">      <span class="comment">&lt;!-- 缓存文件大小，日志达到512K时发送Email --&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"BufferSize"</span> <span class="attr">value</span>=<span class="string">"512"</span> /&gt;</span><span class="comment">&lt;!-- 单位K --&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"From"</span> <span class="attr">value</span>=<span class="string">"test@163.com"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"SMTPHost"</span> <span class="attr">value</span>=<span class="string">"smtp.163.com"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"Subject"</span> <span class="attr">value</span>=<span class="string">"juyee-log4jMessage"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"To"</span> <span class="attr">value</span>=<span class="string">"test@163.com"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"SMTPUsername"</span> <span class="attr">value</span>=<span class="string">"test"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"SMTPPassword"</span> <span class="attr">value</span>=<span class="string">"test"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"org.apache.log4j.PatternLayout"</span>&gt;</span>     </span><br><span class="line">       <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"ConversionPattern"</span>     </span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">"%-d&#123;yyyy-MM-dd HH:mm:ss.SSS a&#125; [%p]-[%c] %m%n"</span> /&gt;</span>     </span><br><span class="line">      <span class="tag">&lt;/<span class="name">layout</span>&gt;</span>     </span><br><span class="line">   <span class="tag">&lt;/<span class="name">appender</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">priority</span> <span class="attr">value</span>=<span class="string">"debug"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"CONSOLE"</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"log4jDebug"</span> /&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"log4jInfo"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"log4jWarn"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"log4jError"</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;appender-ref ref="MAIL" /&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

</details>
</li>
<li><p>基于properties文件的配置</p>
<details><summary style="color:blue">点击展开代码</summary>
<a href="https://blog.csdn.net/manmanxiaohui/article/details/79922546" target="_blank">参考文档</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"># priority  :debug&lt;info&lt;warn&lt;error</span><br><span class="line">#you cannot specify every priority with different file for log4j </span><br><span class="line">log4j.rootLogger=debug,stdout,info,debug,warn,error </span><br><span class="line"></span><br><span class="line">#console</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender </span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout </span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern= [%d&#123;yyyy-MM-dd HH:mm:ss a&#125;]:%p %l%m%n</span><br><span class="line">#info log</span><br><span class="line">log4j.logger.info=info</span><br><span class="line">log4j.appender.info=org.apache.log4j.DailyRollingFileAppender </span><br><span class="line">log4j.appender.info.DatePattern=&apos;_&apos;yyyy-MM-dd&apos;.log&apos;</span><br><span class="line">log4j.appender.info.File=./src/com/hp/log/info.log</span><br><span class="line">log4j.appender.info.Append=true</span><br><span class="line">log4j.appender.info.Threshold=INFO</span><br><span class="line">log4j.appender.info.layout=org.apache.log4j.PatternLayout </span><br><span class="line">log4j.appender.info.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span><br><span class="line">#debug log</span><br><span class="line">log4j.logger.debug=debug</span><br><span class="line">log4j.appender.debug=org.apache.log4j.DailyRollingFileAppender </span><br><span class="line">log4j.appender.debug.DatePattern=&apos;_&apos;yyyy-MM-dd&apos;.log&apos;</span><br><span class="line">log4j.appender.debug.File=./src/com/hp/log/debug.log</span><br><span class="line">log4j.appender.debug.Append=true</span><br><span class="line">log4j.appender.debug.Threshold=DEBUG</span><br><span class="line">log4j.appender.debug.layout=org.apache.log4j.PatternLayout </span><br><span class="line">log4j.appender.debug.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span><br><span class="line">#warn log</span><br><span class="line">log4j.logger.warn=warn</span><br><span class="line">log4j.appender.warn=org.apache.log4j.DailyRollingFileAppender </span><br><span class="line">log4j.appender.warn.DatePattern=&apos;_&apos;yyyy-MM-dd&apos;.log&apos;</span><br><span class="line">log4j.appender.warn.File=./src/com/hp/log/warn.log</span><br><span class="line">log4j.appender.warn.Append=true</span><br><span class="line">log4j.appender.warn.Threshold=WARN</span><br><span class="line">log4j.appender.warn.layout=org.apache.log4j.PatternLayout </span><br><span class="line">log4j.appender.warn.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span><br><span class="line">#error</span><br><span class="line">log4j.logger.error=error</span><br><span class="line">log4j.appender.error = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.error.DatePattern=&apos;_&apos;yyyy-MM-dd&apos;.log&apos;</span><br><span class="line">log4j.appender.error.File = ./src/com/hp/log/error.log </span><br><span class="line">log4j.appender.error.Append = true</span><br><span class="line">log4j.appender.error.Threshold = ERROR </span><br><span class="line">log4j.appender.error.layout = org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.error.layout.ConversionPattern = %d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span><br></pre></td></tr></table></figure>

</details></li>
</ol>


<h3 id="5-2-log4j2配置"><a href="#5-2-log4j2配置" class="headerlink" title="5.2 log4j2配置"></a>5.2 log4j2配置</h3><details><summary style="color:blue">点击展开代码</summary>
<a href="https://www.cnblogs.com/WangBoBlog/p/7841217.html" target="_blank">参考文档</a>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">status</span>=<span class="string">"error"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--  先定义所有的appender --&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">appenders</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--   这个输出控制台的配置 --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--    控制台只输出level及以上级别的信息（onMatch），其他的直接拒绝（onMismatch） --&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"trace"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--    这个都知道是输出日志的格式 --&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">Console</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--   文件会打印出所有信息，这个log每次运行程序会自动清空，由append属性决定，这个也挺有用的，适合临时测试用 --&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--   append为TRUE表示消息增加到指定文件中，false表示消息覆盖指定的文件内容，默认值是true --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">File</span> <span class="attr">name</span>=<span class="string">"log"</span> <span class="attr">fileName</span>=<span class="string">"log/test.log"</span> <span class="attr">append</span>=<span class="string">"false"</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">File</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--   添加过滤器ThresholdFilter,可以有选择的输出某个级别以上的类别 onMatch="ACCEPT" onMismatch="DENY"意思是匹配就接受,否则直接拒绝 --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">File</span> <span class="attr">name</span>=<span class="string">"ERROR"</span> <span class="attr">fileName</span>=<span class="string">"logs/error.log"</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;yyyy.MM.dd 'at' HH:mm:ss z&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">File</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--   这个会打印出所有的信息，每次大小超过size，则这size大小的日志会自动存入按年份-月份建立的文件夹下面并进行压缩，作为存档 --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">"RollingFile"</span> <span class="attr">fileName</span>=<span class="string">"logs/web.log"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">filePattern</span>=<span class="string">"logs/$$&#123;date:yyyy-MM&#125;/web-%d&#123;MM-dd-yyyy&#125;-%i.log.gz"</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;yyyy-MM-dd 'at' HH:mm:ss z&#125; %-5level %class&#123;36&#125; %L %M - %msg%xEx%n"</span>/&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"2MB"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">appenders</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!--  然后定义logger，只有定义了logger并引入的appender，appender才会生效 --&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">loggers</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--   建立一个默认的root的logger --&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"trace"</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"RollingFile"</span>/&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"ERROR"</span> /&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"log"</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span> </span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">loggers</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

</details>

<h3 id="5-3-logback配置"><a href="#5-3-logback配置" class="headerlink" title="5.3 logback配置"></a>5.3 logback配置</h3><details><summary style="color:blue">点击展开代码</summary>
<a href="https://www.jianshu.com/p/04065d8cb2a9" target="_blank">参考文档</a>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">"true"</span> <span class="attr">scan</span>=<span class="string">"true"</span> <span class="attr">scanPeriod</span>=<span class="string">"1 seconds"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义参数,后面可以通过$&#123;app.name&#125;使用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"app.name"</span> <span class="attr">value</span>=<span class="string">"logback_test"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ConsoleAppender 用于在屏幕上输出日志--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义了一个过滤器,在LEVEL之下的日志输出不会被打印出来--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里定义了DEBUG，也就是控制台不会输出比ERROR级别小的日志--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.ThresholdFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- encoder 默认配置为PatternLayoutEncoder --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义控制台输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d [%thread] %-5level %logger&#123;36&#125; [%file : %line] - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"file"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义日志输出的路径--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里的scheduler.manager.server.home 没有在上面的配置中设定，所以会使用java启动时配置的值--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--比如通过 java -Dscheduler.manager.server.home=/path/to XXXX 配置该属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;scheduler.manager.server.home&#125;/logs/$&#123;app.name&#125;.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义日志滚动的策略--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--定义文件滚动时的文件名的格式--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;scheduler.manager.server.home&#125;/logs/$&#123;app.name&#125;.%d&#123;yyyy-MM-dd.HH&#125;.log.gz</span><br><span class="line">            <span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--60天的时间周期，日志量最大20GB--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>60<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 该属性在 1.1.6版本后 才开始支持--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">totalSizeCap</span>&gt;</span>20GB<span class="tag">&lt;/<span class="name">totalSizeCap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">triggeringPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--每个日志文件最大100MB--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">triggeringPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d [%thread] %-5level %logger&#123;36&#125; [%file : %line] - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--root是默认的logger 这里设定输出级别是debug--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"trace"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--定义了两个appender，日志会通过往这两个appender里面写--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"file"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--对于类路径以 com.example.logback 开头的Logger,输出级别设置为warn,并且只输出到控制台--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--这个logger没有指定appender，它会继承root节点中定义的那些appender--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.example.logback"</span> <span class="attr">level</span>=<span class="string">"warn"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--通过 LoggerFactory.getLogger("mytest") 可以获取到这个logger--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--由于这个logger自动继承了root的appender，root中已经有stdout的appender了，自己这边又引入了stdout的appender--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--如果没有设置 additivity="false" ,就会导致一条日志在控制台输出两次的情况--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--additivity表示要不要使用rootLogger配置的appender进行输出--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"mytest"</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"stdout"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--由于设置了 additivity="false" ，所以输出时不会使用rootLogger的appender--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--但是这个logger本身又没有配置appender，所以使用这个logger输出日志的话就不会输出到任何地方--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"mytest2"</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

</details>

<p>附录：<a href="/2020/01/05/java-log-system/Alibaba-java-coding-guidelines.pdf">阿里巴巴Java代码规范手册</a></p>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="https://blog.zjee.me">Jack.Charles</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="https://blog.zjee.me/2020/01/05/java-log-system/">https://blog.zjee.me/2020/01/05/java-log-system/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/Java/">Java</a>
            <a href="/tags/日志/">日志</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2020/01/05/jdk-proxy/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">JDK动态代理</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/2019/12/29/hashmap-source-learning/">
        <span class="next-text nav-default">HashMap源码完全解读</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments">
  </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:zjee@live.cn" class="iconfont icon-email" title="email"></a>
        <a href="/pass" class="iconfont icon-facebook" title="facebook"></a>
        <a href="/pass" class="iconfont icon-weibo" title="weibo"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2018 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Jack.Charles</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script>
		function loadJs(url, callback){
			var script = document.createElement('script');
			script.type = "text/javascript";
			
			if(typeof(callback) != "undefined"){
			 	if(script.readyState){
			 		script.onreadystatechange=function(){
			  			if(script.readyState == "loaded" || script.readyState == "complete"){
				  			script.onreadystatechange=null;
				  			callback();
			  			}
			 		}
				}
				else {script.onload = function(){callback();}}
			}
			script.src = url;
			document.body.appendChild(script);
		}
		
		function loadValine() {
			var valine = new Valine();
			valine.init({
				el:'#comments',
				appId: 'hiuyEvHNGJv0HBzIgke1FOa2-MdYXbMMI', 
				appKey: 'W2WW9ah2D4zfyhW3aYtKw3xD',
				placeholder: 'say something...',
				avatar: 'monsterid',
				lang: 'zh-CN',
				visitor: true,
				requiredFields: ['nick'],
			});
		}
		
		loadJs('//unpkg.com/valine/dist/Valine.min.js', loadValine);
    </script><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
