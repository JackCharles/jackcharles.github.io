<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="记录职业生涯的点点滴滴..."/><link rel="alternate" href="/atom.xml" title="江影不沉浮"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="http://blog.zjee.ml/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" /><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" /><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?440ec0c403d1159e127d0a966dc3e964";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "hiuyEvHNGJv0HBzIgke1FOa2-MdYXbMMI",
      appKey: "W2WW9ah2D4zfyhW3aYtKw3xD"
    });
  </script><script>
  window.config = {"leancloud":{"app_id":"hiuyEvHNGJv0HBzIgke1FOa2-MdYXbMMI","app_key":"W2WW9ah2D4zfyhW3aYtKw3xD"},"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

    <title>江影不沉浮</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">江影不沉浮</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">江影不沉浮</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            Categories
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><section id="posts" class="posts"><article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/05/02/fourier-seriers-1/fourier/"></a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-02
        </span><span class="post-visits"
             data-url="/2020/05/02/fourier-seriers-1/fourier/"
             data-title="">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
    <title>Draw</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="draw.css">
</head>

<body>
    <div id="config">
        <p>三角函数配置，每行对应一个函数：</p>
        <div class="config-box">
            <label>振幅(px)</label>
            <br>
            <textarea id="input-amp">200&#10;100&#10;50</textarea>
        </div>

        <div class="config-box">
            <label>角速度(弧度/s)</label>
            <br>
            <textarea id="input-ang">1.7444&#10;3.4889&#10;10.4667</textarea>
        </div>

        <div class="config-box">
            <label>初始相位(弧度)</label>
            <br>
            <textarea id="input-pha">0.8722&#10;1.7444&#10;2.0933</textarea>
        </div>
        <div class="config-box">
            <label>帧率(帧/s)</label>
            <br>
            <input id="input-fps" type="number" value="200">
            <br>
            <button onclick="render()">绘制</button>
            <button id="draw-play" onclick="pausePush(this)" status="paused">播放</button>
        </div>
    </div>
 
    <div>
        <canvas id="drawing">Drawing area.</canvas>
        <script src="draw.js"></script>
    </div>

</body>

</html>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/05/02/fourier-seriers-1/">傅里叶级数可视化</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-02
        </span><span class="post-category">
            <a href="/categories/其他/">其他</a>
            </span>
        <span class="post-visits"
             data-url="/2020/05/02/fourier-seriers-1/"
             data-title="傅里叶级数可视化">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>使用H5画布实现的傅里叶级数可视化</p>
          <div class="read-more">
            <a href="/2020/05/02/fourier-seriers-1/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/05/02/fourier-seriers-1/draw/"></a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-02
        </span><span class="post-visits"
             data-url="/2020/05/02/fourier-seriers-1/draw/"
             data-title="">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content">/**
 * y = Rsin(wt + p)
 * R: 振幅
 * w: 角速度
 * p: 相位差
 */

// 单位px
var rList = [];
// 这里实际是圆周分成的份数，该值越大，角速度越小
var wList = [];
//初始相位，相对于w设置的，比如初始在第50份的角度
var pList = [];

//H5绘图相关
var drawing = document.getElementById("drawing");
var ctx = drawing.getContext("2d");
var circleMaxWidth = 0;
var frameDelay = 10;

//用于绘制三角函数的点
var sinPoint = [];
//x轴增量, 每点增加0.5px
var dx = 0.5;
//绘制周期数
var T = 2;

function draw() {
    //清空画布
    ctx.clearRect(0, 0, drawing.width, drawing.height);

    //初始化第一个圆的圆心
    var cX = circleMaxWidth + 10;
    var cY = drawing.clientHeight;

    //叠加坐标位置（最后一个圆的坐标）
    var finalX, finalY;

    //绘制所有圆
    rList.forEach((r, i) => {
        //画圆
        ctx.beginPath();
        ctx.strokeStyle = "#000000";
        ctx.arc(cX, cY, r, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.closePath();

        var process = pList[i] / wList[i];
        console.log("process", process)
        var x = r * Math.cos(2 * Math.PI * process);
        var y = r * Math.sin(2 * Math.PI * process);

        ctx.beginPath();
        ctx.strokeStyle = "#FF0000";
        //画半径
        ctx.moveTo(cX, cY);
        ctx.lineTo(x + cX, y + cY);

        // 画导航线（最后一个圆的横坐标向右延申到y轴）
        if (i == rList.length - 1) {
            finalX = circleMaxWidth * 2 + 10;
            finalY = y + cY;
            ctx.moveTo(x + cX, y + cY);
            ctx.lineTo(finalX, finalY);
        }
        ctx.stroke();
        ctx.closePath();

        //更新下一个圆心
        cX += x;
        cY += y;

        //核心：更新角度，用于下周期绘制
        pList[i] = pList[i] + 1 > wList[i] ? 0 : pList[i] + 1;
    });

    //画坐标系
    ctx.beginPath();
    ctx.strokeStyle = "#000000";
    //X轴
    ctx.moveTo(circleMaxWidth + 10, drawing.clientHeight);
    ctx.lineTo(drawing.width, drawing.clientHeight);
    //Y轴
    ctx.moveTo(circleMaxWidth * 2 + 10, drawing.clientHeight - circleMaxWidth);
    ctx.lineTo(circleMaxWidth * 2 + 10, drawing.clientHeight + circleMaxWidth);
    ctx.stroke();
    ctx.closePath();

    //y轴画个点高亮一下
    ctx.beginPath();
    ctx.strokeStyle = "#2196f3";
    ctx.fillStyle = "#2196f3"
    ctx.arc(finalX, finalY, 8, 0, 2 * Math.PI, true);
    ctx.fill();
    ctx.font = '24px Arial'
    ctx.fillText(-(finalY - drawing.clientHeight), finalX + 10, finalY);
    ctx.stroke();
    ctx.closePath();

    // 画正弦曲线
    if (sinPoint.length >= T * wList[0]) {
        sinPoint.pop();
    }
    sinPoint.unshift(finalY);
    ctx.beginPath();
    ctx.strokeStyle = "#0000FF";
    for (var i = 0; i < sinPoint.length - 1; i++) {
        ctx.moveTo(finalX + i * dx, sinPoint[i]);
        ctx.lineTo(finalX + (i + 1) * dx, sinPoint[i + 1]);
    }
    ctx.stroke();
    ctx.closePath();
}


/**
 * 帧率到延时的转化
 * @param {string} f 帧率
 */
function fps2TimeDelay(f) {
    var fps = parseInt(f);
    if (isNaN(fps) || fps <= 0 || fps> 1000) {
        alert("帧率必须是1000以内的正整数");
        return -1;
    }

    return 1000 / fps;
}

/**
 * 解析振幅数据
 * @param {string} amps 振幅
 */
function amp2IntList(amps) {
    var res = [];
    amps.split("\n").forEach(s => {
        var amp = parseInt(s);
        if (isNaN(amp)) {
            alert("振幅必须是有效正整数");
            return [];
        }
        res.push(amp);
    });
    return res;
}

/**
 * 角速度帧的转换：弧度/s => 帧/周期
 * @param {string} angs 角速度
 * @param {number} fps 帧率
 */
function angularConvert(angs, fps) {
    var res = [];
    angs.split("\n").forEach(s => {
        var ang = parseFloat(s);
        if (isNaN(ang)) {
            alert("角速度必须是有效正数");
            return [];
        }

        res.push(2 * Math.PI / ang * fps);
    });
    return res;
}

/**
 * 初始相位到帧的转换：弧度 => 帧
 * @param {string} phase 初始相位
 * @param {Array} angs 周期帧数
 */
function phaseConvert(phases, angs) {
    var res = [];
    phases.split("\n").forEach((s, index) => {
        var ph = parseFloat(s);
        if (isNaN(ph) || angs[index] === undefined) {
            alert("初始相位必须是有效正数, 且数据条数与角速度一致");
            return [];
        }

        res.push(ph / (2 * Math.PI) * angs[index]);
    });
    return res;
}

/**
 * 初始化
 * @param {Array} amps 
 * @param {Array} angs 
 * @param {Array} phas 
 * @param {number} fps 
 */
function init(amps, angs, phas, fps) {

    //振幅
    var ampList = amp2IntList(amps);
    if (ampList.length === 0) {
        return false;
    }

    //帧延时
    var fd = fps2TimeDelay(fps);
    if (fd <= 0) { return false; } 一周期多少帧 var anglist="angularConvert(angs," parseint(fps)); if (anglist.length="==" 初始偏移多少帧 phalist="phaseConvert(phas," anglist); (phalist.length="==" len="ampList.length;" !="=" || phalist.length alert("振幅、角速度、初始相位数量不一致"); rlist="ampList;" wlist="angList;" plist="phaList;" framedelay="fd;" circlemaxwidth="rList.reduce((total," curr)> total += curr, 0);
    sinPoint = [];
    drawing.width = circleMaxWidth * 2 + wList[0] * T * dx + 10;
    drawing.height = circleMaxWidth * 2 + 20;
    drawing.style.height = drawing.height / 2 + "px";
    return true;
}

//页面控制部分
var timer;
function start() {
    clearInterval(timer);
    timer = setInterval("draw()", frameDelay);
}

function pausePush(x) {
    console.log(x)
    if (x.getAttribute("status") === "running") {
        clearInterval(timer);
        x.setAttribute("status", "paused");
        x.innerHTML = "播放";
    } else {
        start();
        x.setAttribute("status", "running");
        x.innerHTML = "暂停";
    }
}

function render() {
    var amps = document.getElementById("input-amp").value;
    var angs = document.getElementById("input-ang").value;
    var phas = document.getElementById("input-pha").value;
    var fps = document.getElementById("input-fps").value;
    var play = document.getElementById("draw-play");

    if (!init(amps, angs, phas, fps)) {
        return;
    }

    console.log(rList, wList, pList, frameDelay);
    clearInterval(timer);
    play.setAttribute("status", "paused");
    play.innerHTML = "播放";

    draw();
}

render();
</=></=>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/05/02/fourier-seriers-1/draw/"></a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-02
        </span><span class="post-visits"
             data-url="/2020/05/02/fourier-seriers-1/draw/"
             data-title="">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content">#drawing {
    border: 1px solid red;
}

.config-box {
    float: left;
    padding-right: 10px;
}

.config-box textarea {
    height: 80px;
    width: 120px;
    margin-top: 10px;
}

.config-box input {
    width: 120px;
    margin-top: 10px;
    margin-bottom: 10px;
}

.config-box button {
    width: 60px;
}

#config {
    height: 160px;
}
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/04/19/thread-local/">ThreadLocal源码阅读</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-04-19
        </span><span class="post-category">
            <a href="/categories/java/">java</a>
            </span>
        <span class="post-visits"
             data-url="/2020/04/19/thread-local/"
             data-title="ThreadLocal源码阅读">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>在Java开发中，多线程是一个永远绕不开的话题，与之相关的ThreadLocal也备受关注。了解ThreadLocal源码会让我们在实际运用时更得心应手，避免很多不必要的麻烦。本文就从ThreadLocal源码入手，带大家深入理解其底层原理和注意事项。</p>
          <div class="read-more">
            <a href="/2020/04/19/thread-local/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/03/27/learn-markdown/">MarkDown教程</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-03-27
        </span><span class="post-category">
            <a href="/categories/markdown/">markdown</a>
            </span>
        <span class="post-visits"
             data-url="/2020/03/27/learn-markdown/"
             data-title="MarkDown教程">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>简单易懂的markdown教程</p>
          <div class="read-more">
            <a href="/2020/03/27/learn-markdown/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/03/27/firewall-cmds/">Firewall防火墙软件常用操作</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-03-27
        </span><span class="post-category">
            <a href="/categories/linux/">linux</a>
            </span>
        <span class="post-visits"
             data-url="/2020/03/27/firewall-cmds/"
             data-title="Firewall防火墙软件常用操作">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>防火墙是Linux运维中常见操作之一，本文记录了firewall防火墙软件(CentOS7、8)的常见操作。</p>
          <div class="read-more">
            <a href="/2020/03/27/firewall-cmds/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/01/05/jdk-proxy/">JDK动态代理</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-01-05
        </span><span class="post-category">
            <a href="/categories/Java/">Java</a>
            </span>
        <span class="post-visits"
             data-url="/2020/01/05/jdk-proxy/"
             data-title="JDK动态代理">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>Proxy is a structural design pattern that provides an object that acts as a substitute for a real service object used by a client. A proxy receives client requests, does some work (access control, caching, etc.) and then passes the request to a service object.</p>
          <div class="read-more">
            <a href="/2020/01/05/jdk-proxy/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2020/01/05/java-log-system/">Java日志体系</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-01-05
        </span><span class="post-category">
            <a href="/categories/Java/">Java</a>
            </span>
        <span class="post-visits"
             data-url="/2020/01/05/java-log-system/"
             data-title="Java日志体系">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>Java中各种日志层出不穷，都曾想一统天下，最落得个鱼龙混杂，受苦的还是我们这些程序员。这篇文章不讲日志的设计与实现，只说说日常开发中如何使用，如何统一，排除日志冲突，统一日志配置。PS：本文只讨论常规的Java开发场景，不深入讨论J2ME、Android等开发框架。附阿里巴巴Java代码规范手册。</p>
          <div class="read-more">
            <a href="/2020/01/05/java-log-system/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2019/12/29/hashmap-source-learning/">HashMap源码完全解读</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-12-29
        </span><span class="post-category">
            <a href="/categories/Java/">Java</a>
            </span>
        <span class="post-visits"
             data-url="/2019/12/29/hashmap-source-learning/"
             data-title="HashMap源码完全解读">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-content"><p>HashMap源码全解析。本次以Oracle JDK1.8作为示例，深入解读HashMap实现原理，精细阅读每一行源码，并结合各互联网厂商的常见面试问题，对HashMap的实现方案、思想以及使用注意事项做深入探讨。</p>
          <div class="read-more">
            <a href="/2019/12/29/hashmap-source-learning/" class="read-more-link">Read more..</a>
          </div>
        </div></article>
      <nav class="pagination"><a class="next" href="/page/2/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></section></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:zjee@live.cn" class="iconfont icon-email" title="email"></a>
        <a href="/pass" class="iconfont icon-facebook" title="facebook"></a>
        <a href="/pass" class="iconfont icon-weibo" title="weibo"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2018 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">jackcharles</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
